(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{733:function(t,e,n){t.exports={}},754:function(t,e,n){"use strict";n(733)},772:function(t,e,n){"use strict";n.r(e);var o=n(203),r=n(688),c=n(707),l=n(271),d=n(315),h=n(206),f=n(687),m=(n(9),n(6),n(10),n(11),n(7)),v=n(1),k=(n(3),n(8),n(5),n(39),n(101)),x=n(68);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(v.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"ChooseCandidate",mixins:[x.b,x.e],beforeRouteLeave:function(t,e,n){this.leaveDialog.yes?n():(this.onOpenDialogLeave(),n(!1))},layout:"choose",middleware:["insertToken"],data:function(){return{chooseDialog:!1,timeoutDialog:!1,leaveDialog:{open:!1,yes:!1},candidate:{id:null,full_name:null,class_name:null},isTimerFixed:!1}},computed:C(C({},Object(k.b)({loading:"Choose/loading",firstTimeloading:"General/firstTimeloading"})),{},{isTimerChooseNotSet:function(){return this.contentMixin_pollingMaxTime<=0},_chooseDialogProps:function(){var t=this;return{open:this.chooseDialog,width:"400",isPersistent:!0,isUsingFirstButton:!0,isUsingSecondButton:!0,firstBtnText:"Belum yakin",secondBtnText:"Ya saya yakin",isBtnBlock:!0,loadingSecondBtn:this.loading,clickFirstButton:function(){t.onCloseDialogChoose()},clickSecondButton:function(){t.chooseCandidate()}}},_timeoutDialogProps:function(){var t=this;return{open:this.timeoutDialog,width:"400",isPersistent:!0,isUsingSecondButton:!0,secondBtnText:"Ya lanjutkan",clickSecondButton:function(){t.onSubmitLeave()}}},_leaveDialogProps:function(){var t=this;return{open:this.leaveDialog.open,width:"400",isPersistent:!0,isUsingFirstButton:!0,isUsingSecondButton:!0,firstBtnText:"Kembali",secondBtnText:"Ya saya yakin",isBtnBlock:!0,loadingSecondBtn:this.loading,clickFirstButton:function(){t.onCloseDialogLeave()},clickSecondButton:function(){t.onSubmitLeave()}}}}),created:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("General/setFirstTimeLoading",!0),e.prev=1,e.next=4,t.contentMixin_getListDataCandidate();case 4:return e.next=6,t.contentMixin_getDataPollingMaxTime();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.$notifier({type:"error",message:e.t0});case 11:return e.prev=11,t.$store.dispatch("General/setFirstTimeLoading",!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},mounted:function(){window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)},methods:{onOpenDialogChoose:function(data){var t=this;Object.keys(this.candidate).forEach((function(form){t.candidate[form]=data[form]})),this.chooseDialog=!0,this.isTimerChooseNotSet||this.$refs.countDown.onStopTimer()},onCloseDialogChoose:function(){var t=this;Object.keys(this.candidate).forEach((function(form){t.candidate[form]=null})),this.chooseDialog=!1,this.isTimerChooseNotSet||this.$refs.countDown.onStartTimer()},chooseCandidate:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("Choose/submitChoose",t.candidate.id);case 3:return e.next=5,t.$store.dispatch("QuickCount/sendSocket");case 5:return e.next=7,t.$store.dispatch("Dashboard/sendSocket");case 7:t.leaveDialog.yes=!0,t.goBackHome(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t.requestMixin_logResponseErrors(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},onOpenTimeoutDialog:function(){this.timeoutDialog=!0},expiredToken:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("Choose/expiredToken").then((function(){t.timeoutDialog=!1,t.goBackHome()}));case 2:case"end":return e.stop()}}),e)})))()},onOpenDialogLeave:function(){this.leaveDialog.open=!0,this.isTimerChooseNotSet||this.$refs.countDown.onStopTimer()},onSubmitLeave:function(){var t=this;return Object(m.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.leaveDialog.yes=!0,e.next=3,t.expiredToken();case 3:case"end":return e.stop()}}),e)})))()},onCloseDialogLeave:function(){this.leaveDialog.open=!1,this.leaveDialog.yes=!1,this.isTimerChooseNotSet||this.$refs.countDown.onStartTimer()},goBackHome:function(){this.$router.push({name:"index",query:{fromChoose:!0}}),this.leaveDialog.yes=!1},handleScroll:function(){var t=window.scrollY;this.isTimerFixed=t>250}}},y=(n(754),n(36)),component=Object(y.a)(D,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"align-center justify-center"},[e(f.a,{staticClass:"text-center"},[e(r.a,[e("BaseLabel",{attrs:{title:"Pilih Kandidat Terbaik",color:"black",fontSize:"34",isSerif:"",isBold:""}})],1)],1),t._v(" "),t.isTimerChooseNotSet?t._e():e("section",{staticClass:"mb-5"},[e(f.a,{staticClass:"text-center",attrs:{noGutters:""}},[e(r.a,[e("BaseLabel",{attrs:{title:"Waktu Memilih Tersisa",color:"black",fontSize:"16"}})],1)],1),t._v(" "),e(f.a,{attrs:{noGutters:""}},[e(r.a,{staticClass:"text-center"},[e("BaseCountdown",{ref:"countDown",attrs:{isForChoose:"",date:t.contentMixin_pollingMaxTime},on:{onFinishTimer:t.onOpenTimeoutDialog}})],1)],1)],1),t._v(" "),t.isTimerChooseNotSet?t._e():e("section",{directives:[{name:"show",rawName:"v-show",value:t.isTimerFixed,expression:"isTimerFixed"}],staticClass:"timer-section mb-5",class:{"fixed-timer":t.isTimerFixed}},[e(f.a,{staticClass:"text-center",attrs:{noGutters:""}},[e(r.a,[e("BaseLabel",{attrs:{title:"Waktu Memilih Tersisa",color:"black",fontSize:"16"}})],1)],1),t._v(" "),e(f.a,{attrs:{noGutters:""}},[e(r.a,{staticClass:"text-center"},[e("BaseCountdown",{ref:"countDown",attrs:{isForChoose:"",date:t.contentMixin_pollingMaxTime}})],1)],1)],1),t._v(" "),e(f.a,t._l(t.contentMixin_listCandidate,(function(data){return e(r.a,{key:data.id,attrs:{cols:"12",xs:"12",sm:"4",md:"4",lg:"4",xl:"4"}},[e("BaseCard",{scopedSlots:t._u([{key:"img",fn:function(){return[e(l.a,{staticClass:"rounded-xxl",attrs:{src:data.photo,aspectRatio:1}})]},proxy:!0},{key:"body",fn:function(){return[e("section",{staticClass:"text-center"},[e("BaseLabel",{attrs:{title:"No Urut ".concat(data.ordinal_number),color:"black",fontSize:"25"}}),t._v(" "),e("BaseLabel",{attrs:{title:data.full_name,color:"black",fontSize:"30",isSerif:"",isBold:""}}),t._v(" "),e("BaseLabel",{attrs:{title:data.class_name,color:"black",fontSize:"25"}}),t._v(" "),data.motto?e("BaseLabel",{staticClass:"my-3",attrs:{title:"“".concat(data.motto,"”"),color:"black",fontSize:"16",isBold:"",isItalic:""}}):t._e()],1)]},proxy:!0},{key:"action",fn:function(){return[e(o.a,{staticClass:"white--text rounded-xxl",attrs:{dense:"",block:"",depressed:"",color:"landing"},on:{click:function(e){return t.onOpenDialogChoose(data)}}},[t._v("\n            Pilih Kandidat\n          ")])]},proxy:!0}],null,!0)})],1)})),1),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"img",fn:function(){return[e("img",{staticClass:"pt-3",attrs:{src:n(716),width:"200"}})]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("h4",{staticClass:"text-h5 font-weight-bold black--text mt-5"},[t._v("\n          Pilih Kandidat?\n        ")]),t._v(" "),e("span",[t._v("\n          Apakah Anda yakin ingin memilih\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.full_name))]),t._v("\n          kelas\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.class_name))]),t._v("\n          sebagai ketua "+t._s(t.contentMixin_mode)+"?\n        ")])])]},proxy:!0}])},"BaseDialog",t._chooseDialogProps,!1),t._chooseDialogProps)),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"title",fn:function(){return[e("BaseLabel",{staticClass:"text-center",attrs:{title:"Apakah Anda yakin untuk meninggalkan pemilihan",isBold:"",color:"black",fontSize:"20"}})]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("BaseLabel",{attrs:{title:"jika kamu meninggalkan, kamu akan terhitung GOLPUT apakah\n          yakin?",fontSize:"16",color:"black"}})],1)]},proxy:!0}])},"BaseDialog",t._leaveDialogProps,!1),t._leaveDialogProps)),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("h4",{staticClass:"text-h5 font-weight-bold black--text mt-5"},[t._v("\n          Waktu memilih telah habis\n        ")]),t._v(" "),e("span",{staticClass:"secondary--text text-subtitle-1"},[t._v("\n          Kamu di nyatakan Golput / tidak memilih\n        ")])])]},proxy:!0}])},"BaseDialog",t._timeoutDialogProps,!1),t._timeoutDialogProps)),t._v(" "),e(d.a,{attrs:{value:t.firstTimeloading}},[e(h.a,{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,"73f0fd28",null);e.default=component.exports;installComponents(component,{BaseLabel:n(708).default,BaseCountdown:n(730).default,BaseCard:n(438).default,BaseDialog:n(439).default})}}]);