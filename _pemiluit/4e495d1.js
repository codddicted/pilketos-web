(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{744:function(t,e,n){"use strict";n.r(e);var o=n(191),r=n(307),l=n(660),c=n(678),d=n(259),h=n(195),f=n(303),m=n(27),_=n(302),k=n(194),v=n(659),D=(n(9),n(6),n(10),n(11),n(7)),y=n(1),B=(n(3),n(8),n(5),n(41),n(93)),C=n(68);function x(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function S(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?x(Object(source),!0).forEach((function(e){Object(y.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):x(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var T={name:"ChooseCandidate",mixins:[C.b,C.e],beforeRouteLeave:function(t,e,n){this.leaveDialog.yes?n():(n(!1),this.onOpenDialogLeave())},layout:"choose",middleware:["insertToken"],data:function(){return{chooseDialog:!1,timeoutDialog:!1,leaveDialog:{open:!1,yes:!1},candidateId:null,candidate:{uuid:null,full_name:null,class_name:null}}},computed:S(S({},Object(B.b)({loading:"Choose/loading",firstTimeloading:"General/firstTimeloading"})),{},{isTimerChooseNotSet:function(){return Boolean(this.contentMixin_pollingMaxTime<=0)},_chooseDialogProps:function(){var t=this;return{open:this.chooseDialog,width:"400",isPersistent:!0,isUsingFirstButton:!0,isUsingSecondButton:!0,firstBtnText:"Belum yakin",secondBtnText:"Ya saya yakin",isBtnBlock:!0,loadingSecondBtn:this.loading,clickFirstButton:function(){t.onCloseDialogChoose()},clickSecondButton:function(){t.chooseCandidate()}}},_timeoutDialogProps:function(){var t=this;return{open:this.timeoutDialog,width:"400",isPersistent:!0,isUsingSecondButton:!0,secondBtnText:"Ya lanjutkan",clickSecondButton:function(){t.expiredToken()}}},_leaveDialogProps:function(){var t=this;return{open:this.leaveDialog.open,width:"400",isPersistent:!0,isUsingFirstButton:!0,isUsingSecondButton:!0,firstBtnText:"Kembali",secondBtnText:"Ya saya yakin",isBtnBlock:!0,loadingSecondBtn:this.loading,clickFirstButton:function(){t.onCloseDialogLeave()},clickSecondButton:function(){t.onSubmitLeave()}}}}),created:function(){var t=this;return Object(D.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("General/setFirstTimeLoading",!0),e.prev=1,e.next=4,t.contentMixin_getListDataCandidate();case 4:return e.next=6,t.contentMixin_getDataPollingMaxTime();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t.$notifier({type:"error",message:e.t0});case 11:return e.prev=11,t.$store.dispatch("General/setFirstTimeLoading",!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})))()},methods:{onOpenDialogChoose:function(data){var t=this;Object.keys(this.candidate).forEach((function(form){t.candidate[form]=data[form]})),this.chooseDialog=!0,this.isTimerChooseNotSet||this.$refs.countDown.onStopTimer()},onCloseDialogChoose:function(){var t=this;Object.keys(this.candidate).forEach((function(form){t.candidate[form]=null})),this.chooseDialog=!1,this.isTimerChooseNotSet||this.$refs.countDown.onStartTimer()},chooseCandidate:function(){var t=this;this.$store.dispatch("Choose/submitChoose",this.candidate.uuid).then((function(){t.chooseDialog=!1,t.leaveDialog.yes=!0,t.goBackHome()})).catch((function(e){t.requestMixin_logResponseErrors(e)}))},onOpenTimeoutDialog:function(){this.timeoutDialog=!0},expiredToken:function(){var t=this;this.$store.dispatch("Choose/expiredToken").then((function(){t.timeoutDialog=!1,t.goBackHome()}))},onOpenDialogLeave:function(){this.leaveDialog.open=!0,this.isTimerChooseNotSet||this.$refs.countDown.onStopTimer()},onSubmitLeave:function(){this.leaveDialog.yes=!0,this.expiredToken()},onCloseDialogLeave:function(){this.leaveDialog.open=!1,this.leaveDialog.yes=!1,this.isTimerChooseNotSet||this.$refs.countDown.onStartTimer()},goBackHome:function(){this.$router.push({name:"index",query:{fromChoose:!0}}),this.leaveDialog.yes=!1}}},w=n(31),component=Object(w.a)(T,(function(){var t=this,e=t._self._c;return e(c.a,{staticClass:"align-center justify-center"},[e(v.a,{staticClass:"text-center"},[e(l.a,[e("BaseLabel",{attrs:{title:"Pilih Kandidat Terbaik",color:"black",fontSize:"34",isSerif:"",isBold:""}})],1)],1),t._v(" "),t.isTimerChooseNotSet?t._e():e("section",[e(v.a,{staticClass:"text-center"},[e(l.a,[e("BaseLabel",{attrs:{title:"Waktu Pemilihan Tersisa",color:"black",fontSize:"16"}})],1)],1),t._v(" "),e(v.a,[e(l.a,{staticClass:"text-center"},[e("BaseCountdown",{ref:"countDown",attrs:{isForChoose:"",date:t.contentMixin_pollingMaxTime},on:{onFinishTimer:t.onOpenTimeoutDialog}})],1)],1)],1),t._v(" "),e(v.a,{attrs:{dense:""}},[e(l.a,t._l(t.contentMixin_listCandidate,(function(data){return e(r.a,{key:data.uuid,staticClass:"mt-5",attrs:{outlined:""}},[e(h.a,[e(f.a,{attrs:{size:"100",tile:""}},[e(d.a,{attrs:{src:data.photo,aspectRatio:1}})],1),t._v(" "),e(m.a,[e(m.c,[e("BaseLabel",{attrs:{title:data.full_name,color:"black",fontSize:"20",isSerif:"",isBold:""}})],1),t._v(" "),e(m.b,[e("BaseLabel",{attrs:{title:data.class_name,color:"black",fontSize:"20"}}),t._v(" "),data.motto?e("BaseLabel",{staticClass:"my-3",attrs:{title:"“".concat(data.motto,"”"),color:"black",fontSize:"14",isBold:"",isItalic:""}}):t._e(),t._v(" "),e(o.a,{staticClass:"white--text",attrs:{dense:"",block:"",depressed:"",color:"landing"},on:{click:function(e){return t.onOpenDialogChoose(data)}}},[t._v("\n                Pilih Kandidat\n              ")])],1)],1)],1)],1)})),1)],1),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"img",fn:function(){return[e("img",{attrs:{src:n(684),width:"200"}})]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("h4",{staticClass:"text-h5 font-weight-bold black--text mt-5"},[t._v("\n          Pilih Kandidat?\n        ")]),t._v(" "),e("span",[t._v("\n          Apakah Anda yakin ingin memilih\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.full_name))]),t._v("\n          kelas\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.class_name))]),t._v("\n          sebagai ketua "+t._s(t.contentMixin_mode)+"?\n        ")])])]},proxy:!0}])},"BaseDialog",t._chooseDialogProps,!1),t._chooseDialogProps)),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"img",fn:function(){return[e("img",{attrs:{src:n(684),width:"200"}})]},proxy:!0},{key:"title",fn:function(){return[e("BaseLabel",{staticClass:"text-center",attrs:{title:"Pilih Kandidat?",isBold:"",color:"black",fontSize:"20"}})]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("span",[t._v("\n          Apakah Anda yakin ingin memilih\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.full_name))]),t._v("\n          kelas\n          "),e("span",{staticClass:"font-weight-bold"},[t._v(t._s(t.candidate.class_name))]),t._v("\n          sebagai ketua "+t._s(t.contentMixin_mode)+"?\n        ")])])]},proxy:!0}])},"BaseDialog",t._chooseDialogProps,!1),t._chooseDialogProps)),t._v(" "),e("BaseDialog",t._g(t._b({scopedSlots:t._u([{key:"title",fn:function(){return[e("BaseLabel",{staticClass:"text-center",attrs:{title:"Apakah Anda yakin untuk meninggalkan pemilihan",isBold:"",color:"black",fontSize:"20"}})]},proxy:!0},{key:"body",fn:function(){return[e("div",{staticClass:"text-center"},[e("BaseLabel",{attrs:{title:"jika kamu meninggalkan, kamu akan terhitung GOLPUT apakah\n          yakin?",fontSize:"16",color:"black"}})],1)]},proxy:!0}])},"BaseDialog",t._leaveDialogProps,!1),t._leaveDialogProps)),t._v(" "),e(_.a,{attrs:{value:t.firstTimeloading}},[e(k.a,{attrs:{indeterminate:"",size:"64"}})],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{BaseLabel:n(679).default,BaseCountdown:n(701).default,BaseDialog:n(408).default})}}]);